import{f as S,a as w,t as U}from"../chunks/Cp7w3v0t.js";import{i as W}from"../chunks/CdTvtSlu.js";import{o as ze}from"../chunks/wu8WGWAQ.js";import{h as re,az as Be,aA as De,aB as Le,aC as Ge,aD as Ke,aE as Oe,W as Pe,au as Ue,l as Y,o,u as n,q,y as G,m as j,w as Q,aF as F,v as k,a8 as Ve,aG as ge,t as L,z as B,x as s,$ as Fe,k as He,aH as fe}from"../chunks/4Lpfm1mz.js";import{s as E}from"../chunks/BnJy6Fgy.js";import{i as H}from"../chunks/GIOW0cxA.js";import{e as me,i as qe,a as Re,s as We,b as _e}from"../chunks/CStnOnNv.js";import{d as Ye,l as je,e as O,h as Je}from"../chunks/CP3jBiu0.js";import{a as ne,q as pe,b as Xe,B as V,g as Ze}from"../chunks/DK7-xWkq.js";import{g as se}from"../chunks/BPcg4oEo.js";import{p as $}from"../chunks/D6qk6l_c.js";const es=Symbol("is custom element"),ss=Symbol("is html");function ts(e){if(re){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var i=e.value;R(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var v=e.checked;R(e,"checked",null),e.checked=v}}};e.__on_r=r,Be(r),Ye()}}function R(e,t,r,i){var v=as(e);re&&(v[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||v[t]!==(v[t]=r)&&(t==="loading"&&(e[De]=r),r==null?e.removeAttribute(t):typeof r!="string"&&rs(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function as(e){return e.__attributes??(e.__attributes={[es]:e.nodeName.includes("-"),[ss]:e.namespaceURI===Le})}var he=new Map;function rs(e){var t=he.get(e.nodeName);if(t)return t;he.set(e.nodeName,t=[]);for(var r,i=e,v=Element.prototype;v!==i;){r=Ke(i);for(var a in r)r[a].set&&t.push(a);i=Ge(i)}return t}function ns(e,t,r=t){var i=Oe();je(e,"input",v=>{var a=v?e.defaultValue:e.value;if(a=te(e)?ae(a):a,r(a),i&&a!==(a=t())){var p=e.selectionStart,l=e.selectionEnd;e.value=a??"",l!==null&&(e.selectionStart=p,e.selectionEnd=Math.min(l,e.value.length))}}),(re&&e.defaultValue!==e.value||Pe(t)==null&&e.value)&&r(te(e)?ae(e.value):e.value),Ue(()=>{var v=t();te(e)&&v===ae(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function te(e){var t=e.type;return t==="number"||t==="range"}function ae(e){return e===""?null:+e}var is=S('<span class="fill-blank svelte-167gaqt">?</span>'),ls=S('<span class="multiple-choice-mark svelte-167gaqt">?</span>'),os=S('<div class="question-display svelte-167gaqt"><div class="question-header svelte-167gaqt"><span class="question-number svelte-167gaqt"> </span> <span class="progress svelte-167gaqt"> </span></div> <div class="question-content svelte-167gaqt"><div class="question-text svelte-167gaqt"> <!></div></div></div>');function vs(e,t){Y(t,!1);let r=$(t,"question",8),i=$(t,"questionNumber",8),v=$(t,"totalQuestions",8);W();var a=os(),p=o(a),l=o(p),b=o(l);n(l);var x=q(l,2),d=o(x);n(x),n(p);var _=q(p,2),f=o(_),u=o(f),D=q(u);{var I=h=>{var C=is();w(h,C)},M=h=>{var C=ls();w(h,C)};H(D,h=>{r().type==="fill-in"?h(I):h(M,!1)})}n(f),n(_),n(a),G(()=>{E(b,`第 ${i()??""} 题`),E(d,`${i()??""}/${v()??""}`),E(u,`${r().text??""} = `)}),w(e,a),j()}var ds=S('<div class="fill-input-container svelte-5ewcp3"><div class="input-wrapper svelte-5ewcp3"><input type="text" placeholder="请输入答案" maxlength="3" autocomplete="off"/></div> <div class="input-hint svelte-5ewcp3"><span class="hint-text svelte-5ewcp3">💡 只能输入数字</span></div></div>');function us(e,t){Y(t,!1);let r=$(t,"question",12),i=$(t,"disabled",8,!1),v=$(t,"onAnswerChange",8,()=>{}),a=Q(r().userAnswer||"");function p(f){const u=f.target.value;u===""||/^\d+$/.test(u)?(k(a,u),r(r().userAnswer=u===""?null:parseInt(u),!0),v()(r())):f.target.value=s(a)}function l(f){!["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Enter"].includes(f.key)&&!/^[0-9]$/.test(f.key)&&f.preventDefault()}F(()=>Ve(r()),()=>{r().userAnswer!==null&&r().userAnswer!==void 0&&k(a,r().userAnswer.toString())}),ge(),W();var b=ds(),x=o(b),d=o(x);ts(d);let _;n(x),L(2),n(b),G(f=>{_=ne(d,1,"answer-input svelte-5ewcp3",null,_,f),d.disabled=i()},[()=>({disabled:i()})],B),ns(d,()=>s(a),f=>k(a,f)),O("input",d,p),O("keydown",d,l),w(e,b),j()}var cs=S('<div role="button"><span class="option-label svelte-h232e8"> </span> <span class="option-value svelte-h232e8"> </span></div>'),fs=S('<div class="multiple-choice-container svelte-h232e8"><div class="options-grid svelte-h232e8"></div> <div class="choice-hint svelte-h232e8"><span class="hint-text svelte-h232e8">👆 点击选择你认为正确的答案</span></div></div>');function _s(e,t){Y(t,!1);let r=$(t,"question",12),i=$(t,"disabled",8,!1),v=$(t,"onAnswerChange",8,()=>{});const a=["A","B","C","D"];function p(d){i()||(r(r().userAnswer=d,!0),v()(r()))}function l(d,_){(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),p(_))}W();var b=fs(),x=o(b);me(x,5,()=>r().options,qe,(d,_,f)=>{var u=cs();let D;var I=o(u),M=o(I,!0);n(I);var h=q(I,2),C=o(h,!0);n(h),n(u),G(K=>{D=ne(u,1,"option-item svelte-h232e8",null,D,K),R(u,"tabindex",i()?-1:0),R(u,"aria-pressed",r().userAnswer===s(_)),E(M,a[f]),E(C,s(_))},[()=>({selected:r().userAnswer===s(_),disabled:i()})],B),O("click",u,()=>p(s(_))),O("keydown",u,K=>l(K,s(_))),w(d,u)}),n(x),L(2),n(b),w(e,b),j()}var ps=S("<button></button>"),hs=S('<div class="question-section svelte-892rxq"><!> <div class="answer-section svelte-892rxq"><!></div></div> <div class="navigation-section svelte-892rxq"><div class="question-nav svelte-892rxq"></div> <div class="action-buttons svelte-892rxq"><div class="nav-buttons svelte-892rxq"><!> <!></div> <div class="submit-section svelte-892rxq"><!></div></div></div> <div class="back-section svelte-892rxq"><!></div>',1),gs=S('<div class="quiz-container svelte-892rxq"><div class="quiz-header svelte-892rxq"><div class="progress-bar svelte-892rxq"><div class="progress-fill svelte-892rxq"></div></div> <div class="quiz-info svelte-892rxq"><span class="answered-count svelte-892rxq"> </span> <span class="quiz-type svelte-892rxq"> </span></div></div> <!></div>');function Qs(e,t){Y(t,!1);const r=Q(),i=Q(),v=Q();let a=Q([]),p=Q("fill-in"),l=Q(0),b=Q(!1);ze(()=>{const g=pe.subscribe(m=>{k(a,m),s(a).length===0&&se("/")}),y=Xe.subscribe(m=>{k(p,m)});return()=>{g(),y()}});function x(g){pe.update(y=>{const m=y.findIndex(N=>N.id===g.id);return m!==-1&&(y[m]={...g}),y}),d()}function d(){var m,N;const g=_e(s(a)),y=((m=s(a)[s(l)])==null?void 0:m.userAnswer)!==null&&((N=s(a)[s(l)])==null?void 0:N.userAnswer)!==void 0;k(b,g||s(l)===s(a).length-1&&y)}function _(){s(l)<s(a).length-1&&(fe(l),d())}function f(){s(l)>0&&fe(l,-1)}function u(g){k(l,g),d()}function D(){Ze.set("results"),se("/results")}function I(){se("/select-type")}F(()=>(s(a),s(l)),()=>{k(r,s(a)[s(l)])}),F(()=>s(a),()=>{k(i,Re(s(a)))}),F(()=>(s(a),s(i)),()=>{k(v,s(a).length>0?(s(a).length-s(i))/s(a).length*100:0)}),ge(),W();var M=gs();Je(g=>{Fe.title="答题中 - 小学口算练习"});var h=o(M),C=o(h),K=o(C);n(C);var ie=q(C,2),J=o(ie),we=o(J);n(J);var le=q(J,2),be=o(le,!0);n(le),n(ie),n(h);var xe=q(h,2);{var ye=g=>{var y=hs(),m=He(y),N=o(m);const Ae=B(()=>s(l)+1);vs(N,{get question(){return s(r)},get questionNumber(){return s(Ae)},get totalQuestions(){return s(a).length}});var oe=q(N,2),ke=o(oe);{var Ce=c=>{us(c,{get question(){return s(r)},onAnswerChange:x})},$e=c=>{_s(c,{get question(){return s(r)},onAnswerChange:x})};H(ke,c=>{s(p)==="fill-in"?c(Ce):c($e,!1)})}n(oe),n(m);var X=q(m,2),Z=o(X);me(Z,5,()=>s(a),qe,(c,T,A)=>{var z=ps();let P;z.textContent=A+1,G(Te=>P=ne(z,1,"nav-dot svelte-892rxq",null,P,Te),[()=>({answered:s(T).userAnswer!==null&&s(T).userAnswer!==void 0,current:A===s(l)})],B),O("click",z,()=>u(A)),w(c,z)}),n(Z);var ve=q(Z,2),ee=o(ve),de=o(ee);const Se=B(()=>s(l)===0);V(de,{type:"secondary",size:"normal",get disabled(){return s(Se)},onClick:f,children:(c,T)=>{L();var A=U("上一题");w(c,A)},$$slots:{default:!0}});var Qe=q(de,2);const Ee=B(()=>s(l)===s(a).length-1);V(Qe,{type:"secondary",size:"normal",get disabled(){return s(Ee)},onClick:_,children:(c,T)=>{L();var A=U("下一题");w(c,A)},$$slots:{default:!0}}),n(ee);var ue=q(ee,2),Ie=o(ue);{var Me=c=>{V(c,{type:"success",size:"large",fullWidth:!0,onClick:D,children:(T,A)=>{L();var z=U();G(P=>E(z,P),[()=>_e(s(a))?"完成答题，立即判题":`还有 ${s(i)} 题未答，判题`],B),w(T,z)},$$slots:{default:!0}})};H(Ie,c=>{s(b)&&c(Me)})}n(ue),n(ve),n(X);var ce=q(X,2),Ne=o(ce);V(Ne,{type:"secondary",size:"small",onClick:I,children:(c,T)=>{L();var A=U("重新选择题型");w(c,A)},$$slots:{default:!0}}),n(ce),w(g,y)};H(xe,g=>{s(r)&&g(ye)})}n(M),G(()=>{We(K,`width: ${s(v)??""}%`),E(we,`已完成：${s(a).length-s(i)}/${s(a).length??""}`),E(be,s(p)==="fill-in"?"填空题":"选择题")}),w(e,M),j()}export{Qs as component};
